---
version: '3.3'
services:
  front:
    image: node:18
    working_dir: /code
    ports:
      - 3000:3000 # Used by 'server'
      - 5173:5173 # Used by 'vite serve'
      - 5174:5174 # Used by 'vite serve' once the default port is used
    volumes:
      - ./:/code:Z
      # Prevent installation of git hooks during npm/yarn install
      - ./.git:/code/.git:Z,ro
      - front-yarn-cache:/yarn-cache
    environment:
      - YARN_CACHE_FOLDER=/yarn-cache
      - VITE_HOST=0.0.0.0
    init: true
    command: tail -f /dev/null

volumes:
  front-yarn-cache:
